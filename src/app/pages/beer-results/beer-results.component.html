<!--
============================================
; Title: RW Punk API Technical Challenge
; Author: Jason Sullenger
; Date: 11/01/2020
; Description: General Website. Calls Punk API.
; Users can filter and search.
;===========================================
-->

<div class="beerPage" id="textCenter">
  <mat-expansion-panel>
    <mat-expansion-panel-header>
      <mat-panel-title>
        <div class="example-sidenav-content, filterHeader">
          <h6
            (opened)="panelOpenState = true"
            (closed)="panelOpenState = false"
          >
            Filters
          </h6>
        </div>
      </mat-panel-title>
    </mat-expansion-panel-header>

    <!-- Filter -->
    <div class="form" fxLayout="row" fxLayoutAlign="center center">
      <div fxFlex="50" fxFlexOffset="25" class="filter">
        <!-- Search Input -->
        <mat-form-field appearance="fill" class="example-form-field filter">
          <mat-label>Search</mat-label>
          <input
            matInput
            type="text"
            [(ngModel)]="selectedFilter.name"
            (keydown)="applyFilter($event, selectedFilter)"
          />
          <button
            mat-button
            *ngIf="selectedFilter.name"
            matSuffix
            mat-icon-button
            aria-label="Clear"
            (click)="clearedSearch()"
          >
            <mat-icon>close</mat-icon>
          </button>
        </mat-form-field>
        <!-- Alcohol % Select -->
        <mat-form-field appearance="fill" class="example-form-field">
          <mat-label>Alcohol Content</mat-label>
          <select
            color="primary"
            matNativeControl
            [(ngModel)]="selectedFilter.alcoholContent"
            (click)="applyFilter($event, selectedFilter)"
          >
            <option value="" selected (click)="clearedSelect()"></option>
            <option value="Greater">Greater than 5%</option>
            <option value="Lesser">Less than 5%</option>
          </select>
        </mat-form-field>
      </div>
    </div>
  </mat-expansion-panel>
  <!-- End Filter -->

  <!-- Beer List -->
  <mat-grid-list cols="4" rowHeight="1:1.25">
    <div class="beer-card" *ngFor="let beer of beerList">
      <a (click)="openDialog(beer)">
        <mat-grid-tile>
          <div class="beerTile">
            <div class="textCenter justify">
              <img
                mat-card-image
                src="{{ beer.image_url }}"
                alt="Image of {{ beer.name }} bottle"
                class="beerImage"
              />
            </div>
            <div class="beerContent textCenter">
              <h5>{{ beer.name }}</h5>
              <p>
                {{ beer.tagline }}
              </p>
              <hr />
            </div>
          </div>
        </mat-grid-tile>
      </a>
    </div>
  </mat-grid-list>
  <!-- End beer list -->

  <!-- Pagination -->
  <div class="pagDiv">
    <nav aria-label="Page navigation">
      <ul class="pagination justify-content-center">
        <li class="page-item" [class.disabled]="prevDisable">
          <a class="page-link" (click)="previousPage()">Previous</a>
        </li>
        <li class="page-item">
          <a class="page-link">Page {{ pageNumber }}</a>
        </li>
        <li class="page-item" [class.disabled]="nextDisable">
          <a class="page-link" (click)="nextPage()">Next</a>
        </li>
      </ul>
    </nav>
  </div>
  <!-- End Pagination -->
</div>
